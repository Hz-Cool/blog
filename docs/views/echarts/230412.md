---
title: 'EchartåŒYè½´åˆ»åº¦å¯¹é½'
date: 2023-04-12
sidebar: "auto"
categories:
  - 
tags: 
  - Echart
---


## å‰æƒ…å›é¡¾

æ¨èè¿™ç¯‡ä¼˜ç§€çš„æ–‡ç« ï¼š<br/>
[EchartJS åŒYè½´ 0åˆ»åº¦å¯¹é½å¤„ç†](/views/echarts/220923.md)

æ–‡ç« ä¸­ä»‹ç»äº†EchartåŒè½´å‡ºç°è´Ÿå€¼æ—¶åŒè½´å¯¹ç§°å¤„ç†æ–¹å¼ï¼Œæœ€åèƒ½è¾¾åˆ°0åˆ»åº¦çº¿å¯¹å…¶ï¼Œä½†æ˜¯åŒè½´æ¯æ®µåˆ»åº¦å‚å·®ä¸é½ã€‚

æŠ›å¼€æŠ€æœ¯ä¸è°ˆï¼Œå°±ç¾è§‚ç¨‹åº¦æ¥è¯´è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚

é‚æœ‰ä¸€ä¸ªæ–°éœ€æ±‚è¯ç”Ÿï¼šéœ€è¦è¾¾åˆ° `åˆ»åº¦å¯¹é½`ã€‚



## åˆ»åº¦å¯¹é½

åˆ»åº¦å¯¹å…¶ç›¸å¯¹æ¥è¯´æ²¡é‚£ä¹ˆéº»çƒ¦ï¼Œé€šè¿‡Echartæä¾›çš„APIå³å¯è¾¾åˆ°æ•ˆæœã€‚

`interval`ï¼šå¼ºåˆ¶è®¾ç½®åæ ‡è½´åˆ†å‰²é—´éš” <br>
`max`ï¼šåæ ‡è½´åˆ»åº¦æœ€å¤§å€¼ã€‚

é‡ç‚¹æ˜¯è®¡ç®—æ¯æ®µåæ ‡è½´åˆ†å‰²é—´éš”å¤§å°ã€‚

ç®—æ³•é€»è¾‘æ˜¯å…ˆç¼©å°æ¯æ®µåˆ»åº¦çš„10^nï¼Œå†å‘ä¸Šå–æ•´ï¼Œæœ€åæ”¾å¤§å›æ¥ã€‚

æ¯”å¦‚ï¼š
```
    å½“æ¯æ®µä¸º241.28571428571428
    Math.ceil(241.28571428571428 / 100) * 100 = 300

    å½“æ¯æ®µä¸º81691.42857142857
    Math.ceil(81691.42857142857 / 1000) * 1000 = 82000
```



```js
		// æ•°æ®
		var LeftNum = [0, 1336, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0, ]
		var LeftNum = [503, 1689, 118, 165, 686, 662, 645, 320, 15, 113, 40, 143, 740, 182, 29];

		var LeftData = {
			max: Math.max(...LeftNum),
			min: Math.min(...LeftNum)
		}
		var RightNum = [571840, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
		RightNum = [2, 0, 6, 2, 2, 3, 11, 6, 7, 4, 1, 2, 1, 6, 7];

		var RightData = {
			max: Math.max(...RightNum),
			min: Math.min(...RightNum)
		}

		//åŒè½´æ®µæ•°
		let intervalData = 7;

		console.group("åŒè½´å–æ•´åæ¯æ®µå¤§å°");
		let yAxisIntervalList = [IntergerNode(LeftData.max / intervalData), IntergerNode(RightData.max / intervalData)];
		console.log("åŒè½´å–æ•´åæ¯æ®µå¤§å°", yAxisIntervalList)
		console.groupEnd();

		console.group("åŒè½´æœ€å¤§å€¼");
		let yAxisMaxList = [yAxisIntervalList[0] * intervalData, yAxisIntervalList[1] * intervalData];
		console.log("åŒè½´æœ€å¤§å€¼", yAxisMaxList)
		console.groupEnd();

		// é€‰ä¸­é¡¹
		var selected = {
			æ³¨å†Œ: true,
			æ´»è·ƒ: true
		}

		var dom = document.getElementById("container");
		var myChart = echarts.init(dom);
		var app = {};
		option = null;

		option = {
			//1ã€ æ ¼å¼åŒ–æç¤ºä¿¡æ¯
			tooltip: {
				trigger: 'axis',
			},
			toolbox: {
				feature: {
					dataView: {
						show: true,
						readOnly: false
					},
					magicType: {
						show: true,
						type: ['line', 'bar']
					},
					restore: {
						show: true
					},
					saveAsImage: {
						show: true
					}
				}
			},
			legend: {
				data: ['æ³¨å†Œ', 'æ´»è·ƒ'],
				selected,
			},
			grid: {
				width: '50%',
				height: '50%'
			},
			xAxis: [{
				type: 'category',
				data: [
					"2022-09-01",
					"2022-09-02",
					"2022-09-03",
					"2022-09-04",
					"2022-09-05",
					"2022-09-06",
					"2022-09-07",
					"2022-09-08",
					"2022-09-09",
					"2022-09-10",
					"2022-09-11",
					"2022-09-12",
					"2022-09-13",
					"2022-09-14"
				],
				axisPointer: {
					type: 'shadow'
				}
			}],
			yAxis: [{
					type: 'value',
					name: 'æ³¨å†Œ',
					interval: yAxisIntervalList[0],
					max: yAxisMaxList[0],
				},
				{
					type: 'value',
					name: 'æ´»è·ƒ',
					interval: yAxisIntervalList[1],
					max: yAxisMaxList[1],
				}
			],
			series: [{
					name: 'æ³¨å†Œ',
					type: 'bar',
					data: LeftNum
				},
				{
					name: 'æ´»è·ƒ',
					type: 'bar',
					yAxisIndex: 1,
					data: RightNum
				},

			]
		};

		if (option && typeof option === "object") {
			myChart.setOption(option, true);
			myChart.on('legendselectchanged', function(params) {
				option.legend.selected = params.selected
				selected = params.selected
				myChart.setOption(option);
			})
		}

		function IntergerNode(data) {
			console.group(`èŠ‚ç‚¹å–æ•´è®¡ç®—:${data}`)
			data = data < 0 ? Math.abs(data) : data;
			// æ•°å€¼ä½æ•°
			let len = parseInt(data).toString().length;
			console.log("é•¿åº¦", len)
			if (len <= 2) {
				let value = Math.ceil(data)
				console.log("é•¿åº¦ < 2ï¼Œç›´æ¥å–æ•´", value)
				return value;
			}
			// ç¼©æ”¾å€æ•°ç³»æ•°
			let coefficient = len >= 4 ? 2 : 1
			// ç¼©å°å€æ•°
			let multiple = Math.pow(10, len - coefficient);
			console.log(`å€æ•°ç³»æ•° 10^${coefficient}`, )
			// ç¼©å°Nå€ï¼Œå‘ä¸Šå–æ•´ï¼Œæ”¾å¤§Nå€
			let value = Math.ceil(data / multiple) * multiple;
			value = data < 0 ? -value : value;
			console.log(`å–æ•´ç»“æœ Math.ceil(${data} / ${multiple}) * ${multiple} = ${value}`);
			console.groupEnd()
			return value;
		}

```

<img :src="$withBase('/assets/images/230412.png')"  alt="æ¯æ®µåæ ‡è½´åˆ†å‰²é—´éš”å¤§å°">





## æ€»ç»“

ä¸Šé¢åªèƒ½åº”å¯¹æ•°æ®éƒ½æ˜¯æ­£æ•°çš„æƒ…å†µã€‚å¦‚æœæ•°æ®ä¸­æœ‰è´Ÿæ•°å°±ä¼šå‡ºç°0åˆ»åº¦ä¸å¯¹å…¶çš„æƒ…å†µã€‚<br>
æš‚æ—¶èƒ½æƒ³åˆ°çš„ï¼Œèƒ½è§£å†³è´Ÿæ•°çš„åŠæ³•æ˜¯ [é•œåƒæ­£åŒºé—´éƒ¨åˆ†åˆ°è´ŸåŒºé—´-å®ç°0åˆ»åº¦çº¿å¯¹é½](/views/echarts/220923.md#é•œåƒ-æ­£åŒºé—´éƒ¨åˆ†-å®ç°0åˆ»åº¦çº¿å¯¹é½)<br>
åœ¨ç¾è§‚æ€§ä¸Šè¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºã€‚ğŸ˜…ğŸ˜…ğŸ˜…


### æ€è€ƒä¸€

æŒ‰ç…§å¸¸ç†æ¥è¯´ `åŒè½´åˆ»åº¦å¯¹å…¶` `0åˆ»åº¦å¯¹å…¶` ä¹Ÿç®—æ˜¯ä¸€ä¸ªå¸¸è§„éœ€æ±‚ã€‚<br>
ä½†æ˜¯å¸‚é¢ä¸Šçš„çš„å›¾è¡¨ç»„ä»¶å¥½åƒéƒ½æ²¡è¿™ä¸ªæ•ˆæœï¼Œéš¾é“ä¸å¥½å®ç°ï¼Ÿ

### æ€è€ƒäºŒ

"é­”é¬¼"å®¢æˆ·åˆåˆåˆæäº†ä¸ªæ–°éœ€æ±‚ï¼š<br>
å‡è®¾å›¾è¡¨Xè½´æ˜¾ç¤ºäº†30å¤©çš„æ•°æ®1å·~30å·ï¼Œæ­£å¸¸å›¾è¡¨ä¸­Xè½´æ˜¯æ”¾ä¸ä¸‹æ‰€æœ‰æ—¶é—´çš„ï¼Œä¼šä»¥çœç•¥çš„æ–¹å¼æ˜¾ç¤ºã€‚<br>
å¯¹æ–¹å¸Œæœ›èµ·æ­¢æ—¥æœŸæ­£å¸¸æ˜¾ç¤ºï¼Œä¸­é—´éƒ¨åˆ†å¯ä»¥çœç•¥æ˜¾ç¤ºã€‚å¸‚é¢ä¸Šä¹Ÿæ²¡æœ‰è¿™ç§ç»„ä»¶ã€‚ğŸ˜…ğŸ˜…ğŸ˜…