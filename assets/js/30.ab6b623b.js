(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{439:function(t,s,n){"use strict";n.r(s);var a=n(2),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、项目中的常规打印"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、项目中的常规打印"}},[t._v("#")]),t._v(" 一、项目中的常规打印")]),t._v(" "),s("p",[t._v("1、常规状态下，把项目中css和对应HTML和写好，然后调用 "),s("code",[t._v("window.print()")]),t._v("即可。")]),t._v(" "),s("p",[t._v("2、进一步优化可以多增加一个预览页面")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 输出打印区域内容 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("PrintInnerHTML")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n  <!Doctype html>\n  <html>\n  <head>\n      <title>Preview Content</title>\n      <style>\n      html,\n      body {\n          height: 100%;\n          margin: 0;\n          padding: 0;\n          overflow: auto;\n          background-color: #f1f2f3;\n          box-sizing: border-box;\n      }\n\n      .print {\n          width: 594.3pt;\n          height: 840.51pt;\n          background-color: #fff;\n          position: relative;\n          box-sizing: border-box;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin: 0px auto;\n      }\n      // 样式内容\n      </style>\n  </head>\n\n  <body>\n      <div class="print">\n          <div id="printWarp">\n              ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n          </div>\n      </div>\n  </body>\n  </html>\n  ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 打印 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("PrintElement")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" printContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'printWarp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印区域")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PrintInnerHTML")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      printContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" string\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 追加")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reload")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重新加载")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 预览 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Preview")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" printContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'printWarp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印区域")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PrintInnerHTML")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      printContent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" string\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 追加")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" html_ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outerHTML"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取整个")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 预览")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"绝对位置打印"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#绝对位置打印"}},[t._v("#")]),t._v(" 绝对位置打印")]),t._v(" "),s("p",[t._v("现有固定A4不干胶纸，已经裁切好大小。需要针对每个裁切块做精确位置打印。")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/images/230726_1.png"),alt:"A4不干胶纸"}}),t._v(" "),s("p",[t._v("已知一张纸大小：210mm * 297mm，每个分切块大小：63.5mm * 28mm。")]),t._v(" "),s("p",[t._v("当我按照毫米单位(mm)去处理时，发现打印出来的效果和想要的结果有差异。")]),t._v(" "),s("h3",{attrs:{id:"pt-单位的应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pt-单位的应用"}},[t._v("#")]),t._v(" PT 单位的应用")]),t._v(" "),s("p",[t._v("查询得知：有一个叫 "),s("code",[t._v("PT")]),t._v(" 的单位。")]),t._v(" "),s("p",[t._v("px是像素单位、em是相对单位、pt是绝对单位。")]),t._v(" "),s("p",[t._v("pt全称为point，是排版印刷中常用的大小单位。")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    1pt=0.35146mm\n    1mm=2.83pt\n\n    一张纸大小：210mm*297mm\n    2.83 * 210 = 594.3pt\n    2.83 * 297 = 840.51pt\n\n    分切块大小：63.5mm*28mm\n    2.83 * 63.5 = 179.705pt\n    2.83 * 28 = 79.24pt\n")])])]),s("p",[t._v("然后按照 pt 单位去排列每个分切快。页面框架部分（页面排版、分切块）都以 pt 作为单位。\n"),s("br"),t._v("\n内容区域按自己喜好px、pt都可以。")]),t._v(" "),s("h2",{attrs:{id:"排版方式的打印差异"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排版方式的打印差异"}},[t._v("#")]),t._v(" 排版方式的打印差异")]),t._v(" "),s("p",[t._v("排版方式的选择会直接影响打印结果的展示")]),t._v(" "),s("h3",{attrs:{id:"排版方式-壹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排版方式-壹"}},[t._v("#")]),t._v(" 排版方式<壹>")]),t._v(" "),s("p",[t._v("排版方式<壹>：从左往右换行排列")]),t._v(" "),s("p",[t._v("第一次尝试是通过设置内边距"),s("code",[t._v("padding")]),t._v("，然后采用 "),s("code",[t._v("flex")]),t._v(" 布局从左往右换行排列。")]),t._v(" "),s("p",[t._v("需要计算每个分切快的宽"),s("code",[t._v("width")]),t._v("高"),s("code",[t._v("height")]),t._v("。")]),t._v(" "),s("p",[t._v("但是最后的结果并不完美，第一排能完美对其，后面几列的对其越来越离谱。")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" flex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("flex-direction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("flex-wrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("img",{attrs:{src:t.$withBase("/assets/images/230726_4.png"),alt:"从左往右换行排列"}}),t._v(" "),s("h3",{attrs:{id:"排版方式-贰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排版方式-贰"}},[t._v("#")]),t._v(" 排版方式<贰>")]),t._v(" "),s("p",[t._v("排版方式<贰>：容器绝对居中，容器内从左往右换行排列")]),t._v(" "),s("p",[t._v("先用"),s("code",[t._v("flex")]),t._v("布局框定整个区域内容（容器指的是整个区域内容）。")]),t._v(" "),s("p",[t._v("虽然有纸张、打印机的精度问题，但打印出来的效果会好很多。")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" flex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("flex-wrap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("align-content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" center"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("align-items")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" center"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("img",{attrs:{src:t.$withBase("/assets/images/230726_5.png"),alt:"容器绝对居中，容器内从左往右换行排列"}}),t._v(" "),s("h2",{attrs:{id:"优化-可拖动每个分切快"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化-可拖动每个分切快"}},[t._v("#")]),t._v(" 优化：可拖动每个分切快")]),t._v(" "),s("p",[t._v("可选择某几个分切快拖动打印。")]),t._v(" "),s("p",[t._v("拖动采用的组件是 "),s("a",{attrs:{href:"https://github.com/react-dnd/react-dnd",target:"_blank",rel:"noopener noreferrer"}},[t._v("React-dnd"),s("OutboundLink")],1),t._v("，可以参考这个"),s("a",{attrs:{href:"https://react-dnd.github.io/react-dnd/examples/dustbin/multiple-targets",target:"_blank",rel:"noopener noreferrer"}},[t._v("案例"),s("OutboundLink")],1)]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/images/230726_6.gif"),alt:"容器绝对居中，容器内从左往右换行排列"}}),t._v(" "),s("h2",{attrs:{id:"打印配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打印配置"}},[t._v("#")]),t._v(" 打印配置")]),t._v(" "),s("p",[t._v("为了能完美贴合纸张，需要改动打印配置项。")]),t._v(" "),s("p",[t._v("配置项设置方式如下：")]),t._v(" "),s("ul",[s("li",[t._v("边距：无")]),t._v(" "),s("li",[t._v("缩放：100%（不进行任何缩放）")]),t._v(" "),s("li",[t._v("选项：背景图形（建议勾选）")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/assets/images/230726_7.png"),alt:"打印设置"}}),t._v(" "),s("h2",{attrs:{id:"参见"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参见"}},[t._v("#")]),t._v(" 参见")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://baike.baidu.com/item/PT/9466952",target:"_blank",rel:"noopener noreferrer"}},[t._v("PT 单位"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);